// ==UserScript==
// @name         Ð¦Ð¸Ñ‚Ð°Ñ‚Ñ‹ Ð’ÐµÐ»Ð¸ÐºÐ¸Ñ… Ð¢Ð¾Ð¼Ð°ÑÐ¾Ð²
// @version      0.0.3
// @description  Great Quotes By Great Thomases
// @author       Boris Nikitashov, Alex Mazurenko
// @match        https://app.clickup.com/*
// @updateURL    https://raw.githubusercontent.com/ooohrayyy/thomas-says/main/script.js
// @downloadURL  https://raw.githubusercontent.com/ooohrayyy/thomas-says/main/script.js
// @supportURL   https://github.com/ooohrayyy/thomas-says
// @homepage     https://github.com/ooohrayyy/thomas-says
// ==/UserScript==

const THOMAS_NAME = 'Thomas Zaporozhtsev'

const thomasQuotes = [
  'ÑÐ¾Ð²ÐµÑ‚ Ð²ÑÐµÐ¼ Ð½Ð¾Ñ€Ð¼ Ñ‡ÐµÐ»Ð°Ð¼ - Ð½Ðµ Ð½Ð°Ð´Ð¾ Ð¿Ð°Ñ€Ð¸Ñ‚ÑŒÑÑ Ð¸Ð·-Ð·Ð° Ñ…ÑƒÐ¹Ð½Ð¸, ÐµÑÐ»Ð¸ Ð²Ñ‹ Ð½Ð¾Ñ€Ð¼ Ñ‡ÐµÐ»Ñ‹, Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ Ð²ÑÐµ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¾!',
  'failure is not an option for us my friend',
  'Ð²ÑÐµ Ð¿Ð¾ ÐºÐ°Ð¹Ñ„Ñƒ Ð±ÑƒÐ´ÐµÑ‚, Ð±Ñ€Ð°Ñ‚Ð¸ÑˆÐºÐ°',
  'ÐµÑÐ»Ð¸ Ñ‚Ñ‹ Ñ Ñ‚Ð°ÑÐºÐ¾Ð¹ Ð¶ÐµÑÑ‚ÐºÐ¾ ÐµÐ±ÐµÑˆÑŒÑÑ, Ñ‚Ð¾ Ð²ÑÐµ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¾ Ð±ÑƒÐ´ÐµÑ‚ (Ð¿Ð¾ ÑÐµÐºÑ€ÐµÑ‚Ñƒ - Ñ Ð´ÐµÐ²ÑƒÑˆÐºÐ°Ð¼Ð¸ Ñ‚Ð¾Ð¶Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚)',
  'Ð Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ!',
  'Ð—ÐµÐ¼Ð»Ñ Ð³Ð¾Ð²Ð½Ð¾Ð¼ Ñ‚Ð¾Ð¼Ñƒ ÐºÑ‚Ð¾ ÑÑ‚Ð¾ Ð¿Ñ€Ð¸Ð´ÑƒÐ¼Ð°Ð»',
  'Ð“Ð³Ð³Ð³Ð³Ð¾',
  'Ð—Ð° Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ - Ð»Ð°Ð¹Ðº Ð¸ ÑÐ¿Ð°ÑÐ¸Ð±Ð¾',
  'Ð½ÐµÑ€Ð°Ð²ÐµÐ½ÑÑ‚Ð²Ð¾ - ÑÑ‚Ð¾ Ð´Ð°Ð½Ð½Ð¾ÑÑ‚ÑŒ, Ð¸ Ð´Ð°Ð¶Ðµ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¾, ÐµÑÑ‚ÑŒ ÐºÑƒÐ´Ð° ÑÑ‚Ñ€ÐµÐ¼Ð¸Ñ‚ÑŒÑÑ',
  'ÐÑƒ Ñ‚Ð°Ðº Ð¼Ð¾Ð¶Ð½Ð¾ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð³Ð´Ðµ Ð½Ðµ Ð½Ñ€Ð°Ð²Ð¸Ñ‚ÑÑ',
  'Ð³Ð¾ Ð¿Ð¾ÐºÑƒÑ€Ð¸Ð¼',
  'Ñ‚ÐµÐ¹Ðº Ð¸Ñ‚ Ð¸Ð·Ð¸',
  'Ñ‡Ðµ ÐºÐ°Ðº Ñ‚Ð°Ð¼ Ñ Ð±Ð°Ð³Ð°Ð¼Ð¸ Ð² ims?',
  'Ð²ÑÐµ Ð±ÑƒÐ´ÐµÑ‚ ÐºÐ°Ðº Ð±ÑƒÐ´ÐµÑ‚, Ð° Ð±ÑƒÐ´ÐµÑ‚ Ð½Ð¸ÑˆÑ‚ÑÐº. ÐºÐ¾ Ð²ÑÐµÐ¼ Ð¿Ñ€Ð¸Ñ…Ð¾Ð´Ð¸Ñ‚ Ñ‡ÑƒÐ²Ð°Ðº Ð´ÐµÐ¿Ñ€ÐµÑÐ½ÑÐº',
  'Ð½Ñƒ Ð²Ð°Ñ‰Ðµ Ð´Ð°, ÑÑ‚Ñ€Ð°Ð½Ð½Ð¾Ð²Ð°Ñ‚Ð¾ Ð²ÑÐµ ÑÑ‚Ð¾ Ð²Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚',
  'ÐŸÐ¾Ð´ÐºÐ¸Ð½ÑƒÐ»Ð¸ Ð¿Ð¼Ñƒ ÑÑ€Ð°Ð½ÑŒ ÐºÐ°ÐºÑƒÑŽ-Ñ‚Ð¾',
  'Ð ÐµÐ±ÑÑ‚Ð°, Ñƒ Ð²ÑÐµÑ… ÐºÐ»Ð¸ÐºÐ°Ð¿ Ð»Ð°Ð³Ð°ÐµÑ‚?',
  'Ð¼Ð½Ðµ Ð½ÐµÐ´Ð°Ð²Ð½Ð¾ ÑÐ½Ð¸Ð»ÑÑ ÐšÐ»Ð°ÑÑ‚ÐµÑ€Ð¸ÐºÑ',
  'Ð·Ð°Ð²Ñ‚Ñ€Ð° ÑÐ¾Ð·Ð²Ð¾Ð½ Ð² 12, Ñ€Ð°Ð±Ð¾Ñ‚ÑÐ³Ð¸',
  'ÐµÑÐ»Ð¸ Ð¿Ð¾Ð½Ð°Ð´Ð¾Ð±ÑÑ‚ÑÑ Ñ†Ð¸Ñ‚Ð°Ñ‚Ñ‹ - Ð¾Ð±Ñ€Ð°Ñ‰Ð°Ð¹ÑÑ',
  'Ð¼Ð½Ðµ ÐÑ…Ð¼Ð°Ð´ Ñ‚Ð¾Ð¶Ðµ Ð½Ðµ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚',
  'Ñ‚Ð°Ð¼ ÐµÑ‰Ðµ Ð² Ñ‚Ð°ÑÐºÐµ Ð½Ð°Ð´Ð¾ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð¼Ð½Ðµ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð¸Ð»Ð¸ Ñ‚Ñ‹ Ð²ÑÐµ Ð½Ð°Ð¿Ð¸ÑÐ°Ð» ÑƒÐ¶Ðµ?)',
  'Ð¡ÑƒÐ¿ÐµÑ€, ÐºÑ€Ð°ÑÐ°Ð²Ð°, Ñ‡ÐµÐ¼Ð¿Ð¸Ð¾Ð½, Ð»ÑƒÑ‡ÑˆÐ¸Ð¹, Ñ‚Ð¾Ð¿-Ð±Ð¾Ð¹ ðŸ˜Ž',
  'ÑÐµÐ¹Ñ‡Ð°Ñ Ð±ÑƒÐ´ÐµÐ¼ Ñ‚ÐµÑÑ‚Ð¸Ð½Ð³ Ð»Ð¸Ñ‚ÑŒ Ð½Ð° Ð¿Ñ€Ð¾Ð´. Ð½Ðµ ÑƒÐ´Ð¸Ð²Ð»ÑÐ¹ÑÑ, ÐµÑÐ»Ð¸ Ñ‡Ñ‚Ð¾',
  'Ð½Ñƒ Ñ‚Ñ‹ Ð¿Ð¾Ñ‚Ð¾Ð¼ Ñ€Ð°Ð·Ð±ÐµÑ€Ð¸ÑÑŒ Ñ ÑÑ‚Ð¾Ð¹ Ð·Ð°Ð´Ð°Ñ‡ÐµÐ¹ Ð¿Ð¾-Ð±Ñ‹ÑÑ‚Ñ€ÐµÐ½ÑŒÐºÐ¾Ð¼Ñƒ',
  'Ñƒ Ð½Ð°Ñ Ð½Ðµ Ñ‚Ð°Ðº Ð²ÑÐµ Ð¶ÐµÑÑ‚ÐºÐ¾',
  'Ð´ÑÐºÑƒÑŽ',
  'ÑÑ‚Ð¾ Ð²ÐµÑ€Ð¸ ÑÑƒÐ¿ÐµÑ€ ÑƒÑ€Ð¶ÐµÐ½Ñ‚ ÐµÑÐ»Ð¸ ÑˆÐ¾',
  'ÐµÐµÐµÐ±Ð¾Ð¸Ð¸Ð¸',
  'Ñ‡ÐµÐ¼Ð¿Ð¸Ð¾Ð½ Ð»ÑŽÐ´ÐµÐ¹, Ñ‡ÐµÐ¼Ð¿Ð¸Ð¾Ð½ Ð·Ð²ÐµÑ€ÐµÐ¹',
  'ÑÑ‚Ð¾ Ð¶Ðµ Ð¼Ð½Ð¾Ð³Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð½Ðµ Ð·Ð°Ð¹Ð¼ÐµÑ‚?)',
  'ÑƒÐ±Ð¸Ñ€Ð°ÐµÐ¼ Ð·Ð° ÑÐ¾Ð±Ð¾Ð¹, Ð½Ðµ Ð¼ÑƒÑÐ¾Ñ€Ð¸Ð¼)',
  'Ñ Ð¾Ð´Ð½Ð¾Ð¹ ÑÑ‚Ð¾Ñ€Ð¾Ð½Ñ‹ - Ð·Ð°ÐµÐ±Ð½Ð¾, Ñ Ð´Ñ€ÑƒÐ³Ð¾Ð¹ Ð³Ð¾Ð²Ð½Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð½Ðµ Ñ…Ð¾Ñ‡ÐµÑ‚ÑÑ',
  'Ð²Ð¾Ð¾Ð±Ñ‰Ðµ Ñ‚Ð°Ð¼ Ð‘Ð¾Ñ€Ð¸Ñ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ‚Ð¾Ñ€Ñ‹ Ð¸Ð· Ð˜ÐœÐ¡ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ',
  'Ñ‚Ñ‹ ÐºÐ°Ðº Ð´ÑƒÐ¼Ð°ÐµÑˆÑŒ? Ð¼Ð¾Ð¶ÐµÐ¼ Ð¿Ð¾ÐºÐ° Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐ°Ðº ÐµÑÑ‚ÑŒ?',
  'Ð½Ñƒ Ð±Ñ‹Ð²Ð°ÐµÑ‚) Ð½Ð¸Ñ‡ÐµÐ³Ð¾) Ñ‚Ð°ÐºÐ°Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ð° Ñƒ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸ÑÑ‚Ð¾Ð²)',
  'Ñ‡Ñ‚Ð¾ Ñ‚ÑƒÑ‚ Ð½Ðµ Ñ‚Ð°Ðº? Ð¼Ð¾Ð¶ÐµÑˆÑŒ Ð¾Ð±ÑŠÑÑÐ½Ð¸Ñ‚ÑŒ Ð»Ð°Ð¼ÐµÑ€Ñƒ?)',
  'Ð¿Ñ€Ð¸Ð»ÐµÑ‚Ð¸Ñ‚ Ð´Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÑÐ´Ñ Ð²Ð¾Ð»ÑˆÐµÐ±Ð½Ð¸Ðº Ð½Ð° Ð³Ð¾Ð»ÑƒÐ±Ð¾Ð¼ Ð²ÐµÑ€Ñ‚Ð¾Ð»ÐµÑ‚Ðµ Ð¸ Ð²ÑÐµ Ð±Ð°Ð³Ð¸ Ð¿Ð¾Ñ„Ð¸ÐºÑÑÑ‚ÑÑ ÑÐ°Ð¼Ð¸)',
  'ÑÐ»Ð°Ð²Ð° Ð±Ð¾Ð³Ñƒ, Ñƒ Ð½Ð°Ñ sc(r)um',
  'Ñ€Ð¸Ð»Ð¸ Ð¿Ð¾ÐºÑ Ð»Ð¾Ð»',
  'Ð¿Ð¸Ñ‚ÑŒ ÐºÑƒÑ€Ð¸Ñ‚ÑŒ Ð½Ðµ Ð±ÑƒÐ´Ñƒ',
  'Ð¼Ð¾Ðµ Ð¿Ð¾Ñ‡Ñ‚ÐµÐ½Ð¸Ðµ',
  'ÐºÐ°Ðº Ð¾Ð±ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð½Ð° Ñ„Ñ€Ð¾Ð½Ñ‚Ðµ?',
  'ÐºÐ°Ðº Ñ€Ð°Ð· Ñ…Ð¾Ñ‚ÐµÐ» ÑÐ¿Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð½Ðµ ÐºÐ¾Ð½Ñ‡Ð¸Ð»Ð¸ÑÑŒ Ð»Ð¸ Ñƒ Ñ‚ÐµÐ±Ñ Ñ‚Ð°ÑÐºÐ¸ Ð¸ Ð½Ðµ Ñ…Ð¾Ñ‡ÐµÑˆÑŒ Ð»Ð¸ Ð´Ð¾Ð±Ð°Ð²ÐºÐ¸)',
  'Ð²ÑÐµÐ³Ð´Ð° Ð¿Ñ€Ð¸ÑÑ‚Ð½Ð¾ ÐºÐ¾Ð³Ð´Ð° CEO Ñ‚Ð°Ðº Ð²Ð¾Ð²Ð»ÐµÑ‡ÐµÐ½ Ð² Ð¿Ñ€Ð¾Ñ†ÐµÑÑ',
  'Ð°Ð´ÑŒÑÐ¼Ð¾ Ñ„ÑƒÐ¼Ð°Ñ€Ðµ',
  'Ð¼Ð½Ð¾Ð³Ð¾ Ð±Ð°Ð³Ð¾Ð²(',
  'ÑƒÑ€Ð¶ÐµÐ½Ñ‚ Ð±Ð°Ð³Ð¸ ÑÐ°Ð¼Ð¸ ÑÐµÐ±Ñ Ð´Ð¾ ÐºÐ¾Ð½Ñ†Ð° Ð½ÐµÐºÑÑ‚ Ð½ÐµÐ´ÐµÐ»Ð¸ Ð½Ðµ Ð¿Ð¾Ñ„Ð¸ÐºÑÑÑ‚',
  '4:20 go?',
  'ÑÑƒÑ‚ÑŒ Ð² Ñ‚Ð¾Ð¼, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ ÐºÐ°Ðº Ð² Ð½ÐµÐ¼ÐµÑ†ÐºÐ¸Ñ… ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÑÑ…, 1 Ð² 1',
]

const checkHref = () => window.location.href.endsWith('notifications')
const getRandomThomasQuote = () => thomasQuotes[Math.floor(Math.random() * thomasQuotes.length)]

const insertQuote = () => {
  const TEXT_NODE_TYPE = 3

  const quoteNode = document.querySelector('.cu-quote__text')
  const quoteTextNode = quoteNode?.childNodes && 
    [...quoteNode.childNodes].filter(n => n.nodeType === TEXT_NODE_TYPE)?.[0]

  const authorNode = document.querySelector('.cu-quote__author-text')

  if (quoteTextNode && authorNode) {
    quoteTextNode.textContent = getRandomThomasQuote()
    authorNode.textContent = THOMAS_NAME
  }
}

const observerCallback = (mutationsList) => {
  const isOnNotificationsPage = checkHref()

  if (isOnNotificationsPage) {
    [...mutationsList]
      .filter(m => m.target.classList?.contains('cu-notifications__body'))
      .forEach(m => {
        [...m.addedNodes]
          .filter(n => n.classList?.contains('cu-quote'))
          .forEach(_ => insertQuote())
      })
  }
}

const observeOptions = {
  childList: true,
  subtree: true,
}

const observer = new MutationObserver(observerCallback)
observer.observe(document.body, observeOptions)
